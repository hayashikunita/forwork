Gitでミスした時間は無駄な時間

・必ず自分のworkリポジトリを作成する事。
・gitignoreを記載する事。

=========コミット前の自動化=========

やるべきこと１：
.gitignore　を*で作成。

やるべきこと２：
uv add pre-commit
やるべきこと３：
.pre-commit-config.yaml　を作成
やるべきこと４：
pre-commit install

→すぐにコミットできなくなる
→試しに実行。


すぐに実行できる pre-commit コマンド
1. すべてのファイルに対してチェックを実行
pre-commit run --all-files
→ すでにコミット済み・トラッキングされている全ファイルを対象に、設定されたすべてのフックを実行します。

2. 特定のフックだけを指定して実行
pre-commit run black --all-files
→ この例では black のみを実行します（他のフック名に変えて応用も可能）。

3. Git のステージ済みファイルだけに対して実行
pre-commit run
→ 通常のワークフローで、git commit 時に自動で実行されるのと同じ挙動です。

💡 事前準備（まだなら）
pre-commit install
→ このコマンドで、Git のフックに pre-commit をインストールしておく必要があります。これで git commit 時に自動実行されるようになります。

💡 事前準備（まだなら）
完全に解除する（アンインストール）
pre-commit installで設定したGitフックを解除・無効化するには、いくつかの方法があります。目的に応じて最適な方法を選択してください。
pre-commit uninstall
→pre-commitをプロジェクトで完全に使わなくする場合や、設定をやり直したい場合は、uninstallコマンドを使用します。これが最も簡単で推奨される方法で

=========コミット後のミス修正=========

SourceTreeにて
前提条件
対象のブランチがカレントである事。

やるべきこと１：
樹形図から間違えたコミットまで行き、その対象のブランチから、1つ前や２つ前の間違えていないコミットで右クリック
やるべきこと２：
「現在のこのブランチをこのコミットまでリセット」を押下
やるべきこと３：
soft:ステージに残ったままコミットが消去される。（おすすめ）
mixed:ステージに残らず、コミットが消去される。（おすすめ）
hard:変更が消えファイルも消える。

=========プッシュ後のミス修正=========


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

はい、GitHubで一度リモートリポジトリにプッシュしたコミットを、履歴ごと削除する方法はあります。ただし、この操作はリモートリポジトリの履歴を書き換える**破壊的な操作**であり、特に複数人で開発している場合には**細心の注意が必要**です。

共同開発者がいる場合は、履歴を書き換える前に必ず全員に連絡し、同意を得てください。他の人が該当ブランチで作業をしている場合、コンフリクトや作業内容の喪失を引き起こす可能性があります。

以下にいくつかの方法を、状況に合わせてご紹介します。

### 方法1：直前のコミット（複数も可）を取り消したい場合 (`git reset`)

ローカルでコミットした直後、すぐに間違いに気づいてプッシュしてしまった、といったケースで有効です。

**手順:**

1.  **ローカルリポジトリでコミットを取り消す**
    ターミナル（またはコマンドプロンプト）で、お使いのリポジトリのディレクトリに移動し、以下のコマンドを実行します。

      * **直前のコミット1つを消す場合:**
        ```bash
        ★git reset --hard HEAD~1
        ```
      * **直前のコミット3つを消す場合:**
        ```bash
        git reset --hard HEAD~3
        ```

    `HEAD~1`は「現在のHEAD（最新のコミット）の1つ前」を意味します。数字を変えることで、取り消したいコミットの数を指定できます。
    `--hard` オプションは、指定したコミット以降の変更をローカルのファイルからも完全に削除します。もし変更内容を残したい場合は `--soft` を使用してください。

2.  **リモートリポジトリに強制的にプッシュする**
    ローカルの履歴を書き換えたので、通常の方法 (`git push`) ではプッシュできません。強制的にリモートの履歴を上書きする必要があります。

    ```bash
    git push --force origin <ブランチ名>
    ```

    例えば、`main` ブランチの場合は以下のようになります。

    ```bash
    git push --force origin main
    ```

    **【より安全な方法】**
    `--force` は強力なコマンドであり、万が一他の人がプッシュしていた場合にその内容を上書きしてしまいます。それを防ぐために `--force-with-lease` を使うことが推奨されています。

    ```bash
    ★git push --force-with-lease origin <ブランチ名>
    ```

    このコマンドは、リモートリポジトリのブランチが、ローカルの最後の状態から更新されていない場合にのみ、プッシュを許可します。これにより、意図しない上書きを防ぐことができます。

### 方法2：過去の特定のコミットを削除したい場合 (`git rebase`)

「いくつか前の、あのコミットだけを消したい」といった場合に有効です。

**手順:**

1.  **インタラクティブ（対話的）リベースを開始する**
    削除したいコミットが含まれる範囲を指定して、インタラクティブなリベースを開始します。例えば、最新から5つのコミットの中に削除したいコミットがある場合は、以下のコマンドを実行します。

    ```bash
    git rebase -i HEAD~5
    ```

2.  **コミットを編集する**
    コマンドを実行すると、エディタが開き、指定した範囲のコミットが一覧で表示されます。

    ```
    pick 1a2b3c4 古いコミット
    pick 5d6e7f8 これを消したい
    pick 9g8h7i6 新しいコミット
    ...
    ```

    削除したいコミットの行頭にある `pick` を `drop` （または `d`）に変更して、ファイルを保存・終了します。

    ```
    pick 1a2b3c4 古いコミット
    drop 5d6e7f8 これを消したい
    pick 9g8h7i6 新しいコミット
    ...
    ```

3.  **リモートリポジトリに強制的にプッシュする**
    リベースによって履歴が書き換えられたため、方法1と同様に強制的なプッシュが必要です。

    ```bash
    git push --force-with-lease origin <ブランチ名>
    ```

### まとめと注意点

| 状況 | 推奨されるコマンド | 注意点 |
| :--- | :--- | :--- |
| **直前のコミットを取り消したい** | `git reset --hard HEAD~<個数>` | ローカルの変更も消える。 |
| **過去の特定のコミットを消したい** | `git rebase -i HEAD~<範囲>` | コンフリクトが発生する可能性あり。 |
| **リモートへの反映** | `git push --force-with-lease origin <ブランチ名>` | 複数人開発では**必須**の確認作業。 |

**【最重要】**
これらの操作は、リモートリポジトリの履歴を恒久的に変更します。操作を誤ると、必要なコミットまで失ってしまう可能性があります。**作業前には、必ずリポジトリのバックアップを取るか、別のブランチに現在の状態を保存しておくことを強くお勧めします。**

```bash
# 現在のブランチのバックアップを作成する例
git branch backup-branch
```

ご自身の状況に合わせて、慎重に操作を行ってください。

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~







大事なことは、ロカールを正にする→リモートブランチを削除する→再度一から実施する。
もしダメだったら、git push -f origin ローカルブランチ名で強制プッシュ。

SourceTreeにて
前提条件
対象のブランチがカレントである事。

リモートブランチがほかの誰も使っていない時。リモートブランチを消しても問題ないとき。

やるべきこと１：
要点：ローカルをHEADを正まで戻す。
ローカルで、「コミット後のミス修正」を行う。
※この状態で、リモートが誤、ローカルが正になる。
※退避させておくのも手。

やるべきこと２：
要点：リモートブランチを削除
その後、Githubのサイトからリモートにあるブランチを削除する。
リモートが誤なので削除してしまう。

やるべきこと３：
要点：フェッチする。
これで、ローカルとリモートが一致する。

やるべきこと４：
現在のこのブランチをこのコミットまでリセットされたブランチから、
新規ブランチ作成、
または、問題なければ、そのままコミットしてプッシュ。

